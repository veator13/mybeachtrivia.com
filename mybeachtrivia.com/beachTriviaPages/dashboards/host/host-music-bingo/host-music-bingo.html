<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Music Bingo â€” Host Console</title>

  <!-- Optional but sensible CSP (relaxed for inline styles in older CSS) -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' https://www.gstatic.com https://www.googletagmanager.com;
    connect-src 'self'
      https://*.googleapis.com https://firestore.googleapis.com
      https://www.googleapis.com https://securetoken.googleapis.com
      https://identitytoolkit.googleapis.com https://*.gstatic.com
      https://*.firebaseio.com wss://*.firebaseio.com;
    img-src 'self' data: https://*.gstatic.com https://*.googleapis.com;
    style-src 'self' 'unsafe-inline';
    font-src 'self' data: https://fonts.gstatic.com;
    frame-src 'self';
    object-src 'none';
  ">

  <link rel="stylesheet" href="/beachTriviaPages/dashboards/host/host-music-bingo/host-music-bingo.css" />
</head>
<body>
  <main class="container">
    <header class="page-header">
      <h1>ðŸŽµ Music Bingo â€” Host</h1>
      <div class="note">Signed in employee required to host</div>
    </header>

    <!-- Start/Resume card -->
    <section class="card">
      <h2>Start or Resume a Game</h2>
      <p>Choose a playlist and set basic options</p>

      <div class="grid">
        <label for="playlist-select">Playlist</label>
        <select id="playlist-select" class="input" aria-label="Playlist"></select>

        <label for="game-name">Game Name</label>
        <input id="game-name" class="input" type="text" placeholder="e.g., Friday Night @ Sandbar" />

        <label for="player-limit">Player Limit</label>
        <input id="player-limit" class="input" type="number" inputmode="numeric" placeholder="e.g., 150" />

        <div class="actions">
          <button id="start-game" class="btn primary">Start Game</button>
        </div>
      </div>
    </section>

    <!-- Join link & QR -->
    <section class="card">
      <h2>Join Link &amp; QR</h2>

      <div class="qr-wrap">
        <canvas id="qr-canvas" width="256" height="256" aria-label="Join QR"></canvas>
      </div>

      <textarea id="join-url" class="mono" rows="3" readonly></textarea>
      <div class="actions">
        <button id="copy-join-link" class="btn">Copy Join Link</button>
      </div>
    </section>

    <!-- Current game panel (app.js fills this) -->
    <section class="card" id="current-game-card" hidden>
      <h2>Current Game</h2>
      <div class="pairs">
        <div><strong>Name</strong> <span id="current-name">â€”</span></div>
        <div><strong>Playlist</strong> <span id="current-playlist">â€”</span></div>
        <div><strong>Game ID</strong> <span id="current-id" class="mono">â€”</span></div>
      </div>

      <div class="grid two">
        <div class="stat">
          <div class="label">Player Count</div>
          <div class="value" id="current-count">0</div>
        </div>
        <div class="stat">
          <div class="label">Current Song</div>
          <div class="value" id="current-song">0</div>
        </div>
      </div>

      <div class="actions row">
        <button id="btn-begin" class="btn">Start</button>
        <button id="btn-next" class="btn">Next</button>
        <button id="btn-pause" class="btn">Pause</button>
        <button id="btn-resume" class="btn">Resume</button>
        <button id="btn-end" class="btn danger">End Game</button>
      </div>
    </section>

    <footer class="footer">Music Bingo Host Console â€” Â© 2025</footer>
  </main>

  <!-- 1) Initialize Firebase (modular). This must run BEFORE app.js. -->
  <script defer src="/firebase-init.js"></script>

  <!-- 2) (Optional) QRCode lib if your app.js uses it. Safe to keep. -->
  <script defer src="/beachTriviaPages/dashboards/host/host-music-bingo/lib/qrcode.min.js"></script>

  <!-- 3) App logic (ESM). Uses modular-only data.js internally. -->
  <script type="module" src="/beachTriviaPages/dashboards/host/host-music-bingo/app.js?v=1"></script>

  <!-- NOTE: We intentionally do NOT load firebase-modular-shims.js here.
       The page is fully modular; removing the shim eliminates the compat
       probe that caused the 'app-compat/no-app' warnings. -->
</body>
</html>
